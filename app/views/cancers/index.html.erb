<% content_for :head do %>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/fixedcolumns/3.3.2/js/dataTables.fixedColumns.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedcolumns/3.3.2/css/fixedColumns.dataTables.min.css">

    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css">


    <link href="https://nightly.datatables.net/searchpanes/css/searchPanes.dataTables.css?_=8054705740aed0c29e3a84ebb221cf01.css" rel="stylesheet" type="text/css" />
    <script src="https://nightly.datatables.net/searchpanes/js/dataTables.searchPanes.js?_=8054705740aed0c29e3a84ebb221cf01"></script>

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://jqueryui.com/resources/demos/style.css">
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <%= javascript_pack_tag "datatable" %>
<% end %>

<% content_for :title, 'Cancer types' %>
<div id="loadingOverlay">
  <%=image_tag "loading_icon.gif"%>
</div>
<div class="container">
  <div class="mt-5">
    <h1>
    Cancers Information
    <button class = "btn btn-1" style="display:inline" >
      <%= link_to "Database Helper", "tutorial" %>
    </button>
    </h1>
  </div>
  


  <button class = "btn btn-outline-dark btn-6">
    <%= link_to "Download cancers list", cancers_path(format: "csv") %>
  </button>

  <% (@col_ranges).each do |mr| %>
      <div id=<%="rangeselect_" + String(mr[:n]) %> title="Range Filter" class="rangeselect">
          <p>
              <label for=<%="value_" + String(mr[:n]) %> >Range:</label>
              <input type="text" id=<%="value_" + String(mr[:n]) %> readonly style="border:0; color:#f6931f; font-weight:bold;" class="w-50">
              <button class="btn btn-outline-primary btn-sm" type="button" data-toggle="collapse" data-target=<%="#collapse_" + String(mr[:n]) %> aria-expanded="false" aria-controls="collapseExample">
                  <i class="fas fa-pen-alt" data-toggle="tooltip" data-placement="left" title="Custom range"></i>
              </button>
              <button class="btn btn-outline-success btn-sm reset-r" type="button" id=<%="reset_" + String(mr[:n]) %> >
                  <i class="far fa-times-circle"></i>
              </button>
              <div class="form-row collapse" id=<%="collapse_" + String(mr[:n]) %> >
                  <div class="form-group col-md-6">
                      <input type="number" class="form-control umin" placeholder="Min" id=<%="umin_" + String(mr[:n]) %> >
                  </div>
                  <div class="form-group col-md-6">
                      <input type="number" class="form-control umax" placeholder="Max" id=<%="umax_" + String(mr[:n]) %> >
                  </div>
              </div>
          </p>

          <div id=<%="slider-range_" + String(mr[:n]) %> class="w-100 slider-range"></div>

          <input type="hidden" value=<%=String(mr[:min]) %> id=<%="min_" + String(mr[:n]) %> >
          <input type="hidden" value=<%=String(mr[:max]) %> id=<%="max_" + String(mr[:n]) %> >
          <br>
      </div>
  <% end %>

  
  <%= content_tag :table, role: :datatable, class: "display", id: "filter_table" do %>
    <thead>
          <th>
            <input type="checkbox" class="selectAll" name="selectAll" value="all">
          </th>

          <% @attrs.each_with_index do |attr, idx| %>
            <th>
            <% if @sp_col_index.include?(idx + 1) %>
              <button class='ftitle btn btn-link btn-sm text-decoration-none' id= "t-<%=attr%>"><i class='fas fa-filter'></i> <%=attr%> </button>
            <% else %>
              <div class="ftitle">
                <%=attr%>
              </div>
            <% end %>
            </th>
          <% end %>
          <th>details</th>
    </thead>
    
    <tbody>

      <% @cancers.each do |cac| %>
        <tr>
          <td></td>
          <% @attrs.each do |attr| %>
            <% if attr == "primary_site" %>
              <td><div class="table_cell"><%= cac[attr] %></div></td>
            <% else %>
              <td><%= cac[attr] %></td>
            <% end %>
          <% end %>
          <td>
            <button class='btn btn-1'> <%= link_to('Details', cac) %> </button>
          </td>
        </tr>
      <% end %>

    </tbody>
  <% end %>
  <%#=image_tag "loading_icon.gif", id: "loadingSpinner", class: "row", style: "margin: auto;"%>

</div>